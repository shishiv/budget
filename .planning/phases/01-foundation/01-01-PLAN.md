---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Initialize Next.js project with Supabase integration, Tailwind CSS, and shadcn/ui component library.

Purpose: Establish the foundational project structure and tooling that all subsequent features depend on.
Output: Working Next.js 15 app with Supabase client configured, shadcn/ui components available, and basic app shell layout.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/templates/summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Discovery findings (Level 1 verification):**
- Use `@supabase/ssr` for server-side auth (NOT the deprecated `@supabase/auth-helpers-nextjs`)
- Server client uses `cookies()` from `next/headers` with `getAll`/`setAll` pattern
- Middleware is required for auth token refresh
- Use `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` env vars

**Tech stack decisions:**
- Next.js 15 with App Router
- TypeScript
- Tailwind CSS v4
- shadcn/ui for components
- Supabase for backend (will configure auth in 01-02)

**Design direction:**
- Clean, minimal UI inspired by Nubank/Inter
- BRL currency with R$ format
- Portuguese locale
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js project with Supabase template</name>
  <files>package.json, tsconfig.json, next.config.ts, tailwind.config.ts, src/app/layout.tsx, src/app/page.tsx, .env.local.example</files>
  <action>
    Run `npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --yes` to create Next.js project in current directory.

    Install Supabase packages: `npm install @supabase/supabase-js @supabase/ssr`

    Create `.env.local.example` with placeholders:
    ```
    NEXT_PUBLIC_SUPABASE_URL=your-project-url
    NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
    ```

    Create Supabase utility files:
    - `src/lib/supabase/server.ts` - Server-side client using cookies() with getAll/setAll pattern
    - `src/lib/supabase/client.ts` - Browser client using createBrowserClient

    Do NOT use deprecated `@supabase/auth-helpers-nextjs` - use `@supabase/ssr` instead.
  </action>
  <verify>
    - `npm run build` succeeds
    - `npm run dev` starts server on localhost:3000
    - No TypeScript errors
  </verify>
  <done>Next.js app runs, Supabase clients created, env template exists</done>
</task>

<task type="auto">
  <name>Task 2: Configure shadcn/ui component library</name>
  <files>components.json, src/lib/utils.ts, src/components/ui/button.tsx, src/components/ui/card.tsx, src/components/ui/input.tsx, src/app/globals.css</files>
  <action>
    Initialize shadcn/ui: `npx shadcn@latest init`
    - Style: New York
    - Base color: Neutral (clean, minimal look like Nubank)
    - CSS variables: Yes
    - Use `src/` directory

    Add essential components:
    ```bash
    npx shadcn@latest add button card input label
    ```

    Update `src/app/globals.css` to ensure Tailwind directives are present and CSS variables are configured for light/dark themes.

    Verify `src/lib/utils.ts` exists with `cn()` utility function.
  </action>
  <verify>
    - `npm run build` succeeds
    - `src/components/ui/` contains button, card, input, label components
    - `components.json` exists with correct configuration
  </verify>
  <done>shadcn/ui initialized, core components available, utils configured</done>
</task>

<task type="auto">
  <name>Task 3: Create app shell layout</name>
  <files>src/app/layout.tsx, src/app/page.tsx, src/components/layout/header.tsx, src/components/layout/sidebar.tsx</files>
  <action>
    Create minimal app shell with:

    1. Update `src/app/layout.tsx`:
       - Set metadata: title "Budget", description
       - Configure font: Inter (clean, modern)
       - Add viewport for mobile
       - Keep minimal, no auth logic yet

    2. Create `src/components/layout/header.tsx`:
       - Simple header with app title "Budget"
       - Placeholder for user menu (right side)
       - Clean, minimal design

    3. Create `src/components/layout/sidebar.tsx`:
       - Navigation placeholder with icons for future pages:
         - Dashboard
         - Transactions
         - Budgets
         - Accounts
       - Use Lucide icons (already included with shadcn)
       - Collapsible on mobile (basic structure, not full implementation)

    4. Update `src/app/page.tsx`:
       - Simple landing page with header and sidebar structure
       - Display "Welcome to Budget" in main content area
       - Use Card component to show placeholder content

    Design notes:
    - Use whitespace generously (Nubank-inspired)
    - Neutral colors, clean borders
    - No complex animations yet
  </action>
  <verify>
    - `npm run dev` shows app with header and sidebar
    - No console errors in browser
    - `npm run build` succeeds
  </verify>
  <done>App shell renders with header, sidebar navigation, and main content area</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Next.js app with Supabase setup, shadcn/ui components, and basic app shell layout</what-built>
  <how-to-verify>
    1. Run: `npm run dev`
    2. Visit: http://localhost:3000
    3. Verify:
       - Page loads without errors
       - Header shows "Budget" title
       - Sidebar shows navigation items (Dashboard, Transactions, Budgets, Accounts)
       - Layout is clean and minimal (whitespace, neutral colors)
       - Responsive: resize browser to mobile width, verify layout adapts
    4. Check browser console: no errors
  </how-to-verify>
  <resume-signal>Type "approved" to continue to auth flow plan, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run dev` starts server successfully
- [ ] No TypeScript errors
- [ ] shadcn/ui components render correctly
- [ ] App shell layout visible in browser
</verification>

<success_criteria>
- Next.js 15 project initialized with TypeScript and Tailwind
- Supabase client utilities created (server + browser)
- shadcn/ui configured with core components (button, card, input, label)
- App shell with header and sidebar navigation
- Clean, minimal design foundation established
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Project Setup Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 01-02-PLAN.md (Auth flow)
</output>
